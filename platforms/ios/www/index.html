<!DOCTYPE html>
<!--[if IE 8 ]>    <html lang="ko" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 9 ]>    <html lang="ko" class="no-js lt-ie9> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html lang="ko" class="no-js">
<!--<![endif]-->
	<head>
	    <meta charset="utf-8">
	    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
		<meta name="viewport" content="width=device-width" />
	    <title>wholook-userapp</title>
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
       	
       	<!-- bootstrap 3.0, jqueryMobile 1.4-->
        <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap.min.css">
        <link rel="stylesheet" href="assets/plugins/bootstrap/css/bootstrap-theme.min.css">
		<link rel="stylesheet" href="assets/plugins/jqm/jquery.mobile-1.4.0.min.css">
		
        
        <link rel='stylesheet' href='assets/css/vendor/normalize.css'>
	    <link rel='stylesheet' href='assets/css/vendor/fontello.css'>
	    <link rel='stylesheet' href='assets/css/style.css'>
	    <link rel='stylesheet' href='assets/css/custom.css'>
		<link rel="stylesheet" href="assets/css//wholook-ui.css">
		
	  
        <!-- Import GoogleWebFonts -->
        <link href='http://fonts.googleapis.com/css?family=Raleway:400,300,100,200,700,500' rel='stylesheet' type='text/css'>
		<link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,400,300,600,700' rel='stylesheet' type='text/css'>
        
        <!-- Modernizr & HTML5 Shiv -->
        
        <script type="text/javascript" src='assets/js/vendor/modernizr.js'></script>
        <script type="text/javascript" src="assets/js/jquery.min.js"></script>
        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        
		<!--[if lt IE 9]>
		<script src='assets/js/vendor/html5shiv.js'></script>
		<![endif]-->
		
		<script type="text/javascript">
			
			var Network_State = false;
			var devicePlatform = '';
				
			function onLoad(){
	        	
	        	document.addEventListener("deviceready", onDeviceReady, false);
	        	
	        }
			
	
			function onDeviceReady() {
				// Register the event listener
				console.log("==========폰갭이 준비중~~~~~");
				document.addEventListener("offline", onOffline, false);
				document.addEventListener("online", onOnline, false);
				document.addEventListener("backbutton", onBackKeyDown, false);
				document.addEventListener("pause", onPause, false);
				document.addEventListener("resume", onResume, false);
				document.addEventListener("menubutton", onMenuKeyDown, false);
				
				//navigator.geolocation.getCurrentPosition(getLocationSuccess, getLocationonError);
				checkConnection();
				
	        	
				console.log("=======================폰갭이 준비되었습니다.");
				
				startGUI();
			}
    	//////////////////// event add end ///////////////////////
			
		</script>
	    
	</head>
	<body class="touch-gesture" onload="onLoad()">
        
            
   <!--
    <div id="preloader" class="loader">
        <div class="status">
            
        </div>
    </div>
   -->
     
    <!-- loader --> 
    <div id="loading" class="loader" style="display:hidden;">
        <div class="status_custom">
        </div>
    </div>
    <!-- loader -->
        
        
    <!-- Container -->
    <div id="container">
        
        <!-- LEFT Menu -->
        <aside id="sidemenu-container">
        	<div id="sidemenu">
        		
	        	<nav id="nav-container">
	        		<h1>
	        		<ul class="nav">
	        			<li><a href="#" style="color:white;">home - 매장리스트</a></li>
	        			<li>
	        				<a href="#" style="color:white;"> 단골 매장 - 후룩텔레콤</a>
	        				<span class="nav-child-container">
	        					<span class="nav-child-trigger">+</span>
	        				</span>
	        				<ul style="height: 0;">
			        			<li><a href="#" style="color:white;">메세지</a></li>
			        			<li><a href="#" style="color:white;">쿠폰</a></li>
			        			<li><a href="#" style="color:white;">업무</a></li>
	        				</ul>
	        			</li>
	        			<li><a href="index.html" style="color:white;">설정</a></li>
	        		</ul>
	        		</h1>
	        	</nav>
        	</div>
        </aside>
	<!-- =Sidebar -->

         
        <section id="content-container">
            
            <!-- 고정 Header --> 
	        <header id="header">
	        	
	        	<div id="menu_all" class="header-button right icon-menu"></div>
	        	<h1><a class='current'>W H O L O O K</a></h1>
	        	<div id="back_url" class="header-button left icon-left" style="visibility:hidden;"></div>
	      
            </header>
            <!-- 고정 Header -->
            
            <!-- Contents --> 
			<div id="content" class="target blog">
				
            </div>
	        <!-- Contents -->
            
            
        </section>
        <!--
        <div class="clearfix">&nbsp;</div>
        -->
    <!-- Main Content -->
    </div>
      
    <!-- =Container -->
    <script>!window.jQuery && document.write('<script src="assets/js/vendor/jquery.js"><\/script>')</script>
	<script src="assets/plugins/bootstrap/js/bootstrap.min.js"></script>
	<script src="assets/plugins/jqm/jquery.mobile-1.4.0.min.js"></script>
	
	<!-- Custom Scripts -->
    <script src='assets/js/plugins/klass.js'></script>
    <script src='assets/js/plugins/photoswipe.js'></script>
    <script src='assets/js/plugins/hammer.js'></script>
    <script src='assets/js/plugins/flexslider.js'></script>
    <script src='assets/js/plugins/h5validate.js'></script>
    <script src='assets/js/plugins/responsivetables.js'></script>
    <script src='assets/js/plugins/prism.js'></script>
    <script src='assets/js/script.js'></script>
		
    <script src="assets/js/handlebars.runtime.js"></script>
    <script src="assets/js/handlebars.js"></script>
    
    <!-- 템플릿 추가 -->
    <script src="assets/templates/common/modalLoading.tmpl"></script>
    <script src="assets/templates/common/modalConfirm.tmpl"></script>
    <script src="assets/templates/common/modalLoadingCon.tmpl"></script>
    <script src="assets/templates/register/identification.tmpl"></script>
    <script src="assets/templates/register/setIdentificationNo.tmpl"></script>
    <script src="assets/templates/register/lagacyAlert.tmpl"></script>
    <script src="assets/templates/register/chooseShop.tmpl"></script>
    
    <script src="assets/templates/register/agreement.tmpl"></script>
    <script src="assets/templates/register/shoplistInfo.tmpl"></script>
    <script src="assets/templates/shop/shopInfo.tmpl"></script>
   
    
	
	<!-- import wholook js api -->
	<script type="text/javascript" src="assets/plugins/wholook/js/jquery.cookie.js"></script>
	<script type="text/javascript" src="assets/plugins/wholook/js/cert/jsbn.js"></script>
	<script type="text/javascript" src="assets/plugins/wholook/js/cert/prng4.js"></script>
	<script type="text/javascript" src="assets/plugins/wholook/js/cert/rng.js"></script>
	<script type="text/javascript" src="assets/plugins/wholook/js/cert/rsa.js"></script>
	<script type="text/javascript" src="assets/plugins/wholook/js/crypto-js/aes.js"></script>	
    <script type="text/javascript" src="assets/wholook-api/wholook-api.js"></script>
    
    
    <script type="text/javascript" src="assets/wholook-api/wholookUserVo.js"></script>
    <script type="text/javascript" src="assets/wholook-api/wholook-user-interface.js"></script>
    <script type="text/javascript" src="assets/wholook-api/wholook-common-ui.js"></script>
 	<script type="text/javascript" src="assets/wholook-api/wholook-mobileUI.js"></script>
	
    <script type="text/javascript">
             
        var userVo = new UserVo(); 
		var template = null; 
		var temlpate_data = null;
		
        var messageObj; 
        var smsCount = 0;
        var firstStepCount = 0;
        
        
        
    	function refresh_ui_list(){
    		alert("업데이트중...");
    	}
    	
		
		function startGUI() {           

			setUpdateTimer(3000);
			set_back_btn(false,'');
			
			$("#back_url").bind( { click: function(){
				click_back_btn();	
			}});
    		setLoadingImgPath("assets/images/spinner.gif"); 
    		
    		//test user sample data 생성
    		removeGuestID();
    		//setLocalGuestID( 2335 );
    		if( getLocalGuestID() == null || getLocalGuestID() == '' )
    		{//최초 사용자
    			console.log( " 최초 사용자 ");
    			if( !getNetworkState() )
    			{//네트웍 연결 안된 사용자
    				alert( "인터넷 연결후 재실행 하십시요!" );
    				appClose();
    			}else
    			{
    				//네트웍 연결 사용자
    				wholookTLSHandshake(function() {
    					console.log( " 핸드쉐이크 -> user_register ");
    					user_register();		
    				},function( error){
    					console.log( " shake error");
    					alert( "암호화 가정중 에러 발생");
    					appClose();	
    				});		
    			}
    		}else//기존 사용자
    		{
    			if( !getNetworkState() )
    			{
    				//네트웍 연결 안된 사용자
    				logIn_success( getLocalGuestID() );
    			}else
    			{
    				//네트웍 연결 사용자
    				wholookTLSHandshake(function() {
    					user_LogIn( getLocalGuestID() );
    				},function( error){
    					alert( "암호화 가정중 에러 발생");
    					appClose();	
    				});
    			}			
    		}
        } 
        
    </script>
	</body>
</html>